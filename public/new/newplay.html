<!--public/new/newplay.html-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalcpp Quiz</title>
    <link rel="stylesheet" href="style.css">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏á‡∏Ñ‡πå Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏∂‡πâ‡∏á */
        #sad-face {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            text-align: center;
            justify-content: center;
            align-items: center;
        }
        #sad-face span {
            font-size: 100px;
            color: red;
        }
/* ‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏µ‡∏°‡∏≠‡∏ß‡∏Å‡∏≤‡∏® */
body {
    background: url('https://cdn.pixabay.com/photo/2015/08/28/11/27/space-911785_1280.jpg') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Arial', sans-serif;
    color: #fff;
    text-align: center;
    margin-right: 270px;
    transition: all 0.3s ease;
}

/* ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
h1 {
    font-size: 40px;
    font-family: 'Roboto', sans-serif;
    color: lawngreen;
    text-shadow: 2px 2px 5px orange;
}

/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö */
#user-welcome {
    font-size: 20px;
    margin: 20px 0;
    color: #fff;
    text-align: center;
}

#user-welcome p {
    font-size: 25px;
    color: cyan;
}

/* ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô */
#player-info {
    margin-top: 30px;
}

#room-code {
    padding: 20px;
    width: 200px;
    background: #ffffff;
    border: 1px solid #444;
    border-radius: 5px;
    color: #fff;
    font-size: 16px;
    margin-right: 10px;
    transition: background-color 0.3s ease;
    box-shadow: 0 0 15px orange;
}

#room-code:focus {
    background: #555;
}

#player-name {
    padding: 20px;
    width: 250px;
    background: #333;
    border: 1px solid #444;
    border-radius: 5px;
    color: #fff;
    font-size: 16px;
    margin-right: 10px;
    transition: background-color 0.3s ease;
    box-shadow: 0 0 15px orange;
}

#player-name:focus {
    background: #555;
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏° */
button {
    background-color: #ff7f50;
    color: white;
    font-size: 18px;
    padding: 18px 30px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

button:hover {
    background-color: #ff6347;
    box-shadow: 0 0 15px orangered;
}

#start-quiz {
    padding: 18px 30px;
    background: #ff7f50;
    border: none;
    border-radius: 5px;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    transition: background 0.3s ease;
}

#start-quiz:hover {
    background: #ff6347;
}

#quiz-container {
    margin-top: 30px;
    display: none;
    background: rgba(0, 0, 0, 0.7);
    padding: 20px;
    border-radius: 10px;
}

#question {
    font-size: 30px;
    color: #ff7f50;
    margin-bottom: 20px;
    background-color: #fff;
    padding: 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô */
    border-radius: 10px; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á */
    display: inline-block; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
    max-width: 90%; /* ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ */
    text-align: left; /* ‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢ */
    margin-left: 0; /* ‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢‡∏ä‡∏¥‡∏î */
}

#timer {
    font-size: 18px;
    color: #fff;
}

/* ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß */
@keyframes fadeIn {
    0% {
        opacity: 0;
        transform: translateY(30px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏ß‡∏î */
.rocket {
    position: absolute;
    bottom: -200px;
    left: 50%;
    width: 100px;
    height: 200px;
    background: linear-gradient(to bottom, #d3d3d3, #666);
    border-radius: 50px 50px 10px 10px;
    animation: rocket-launch 3s ease-out forwards;
    transform: translateX(-50%);
    z-index: 101;  /* ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 101 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏µ‡∏Å */
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

/* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏ß‡∏î */
.rocket:before {
    content: '';
    position: absolute;
    top: -35px;
    left: 50%;
    width: 95px;
    height: 80px;
    background: linear-gradient(to bottom, #ff6347, #ff4500);
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    transform: translateX(-50%);
    z-index: 101;
    box-shadow: 0px 5px 15px rgba(255, 99, 71, 0.5);
}

/* ‡∏õ‡∏µ‡∏Å‡∏Ç‡πâ‡∏≤‡∏á */
.rocket-wing {
    position: absolute;
    width: 40px;
    height: 60px;
    background: #ff6347;
    clip-path: polygon(0 0, 100% 50%, 0 100%);
    z-index: 100;
    transform-origin: center bottom; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô */
    transition: transform 0.3s ease;
}

.rocket-wing.left {
    left: -10px;   /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏ß‡∏î‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô */
    bottom: 20px;  /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏¢‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
    transform: rotate(-90deg) translateY(-10px); /* ‡∏´‡∏°‡∏∏‡∏ô 90 ‡∏≠‡∏á‡∏®‡∏≤‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ */
}

.rocket-wing.right {
    right: -90px;  /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏ß‡∏î‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô */
    bottom: 20px;  /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏¢‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
    transform: rotate(-90deg) translateY(-10px); /* ‡∏´‡∏°‡∏∏‡∏ô 90 ‡∏≠‡∏á‡∏®‡∏≤‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ */
}


/* ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á */
.rocket-window {
    position: absolute;
    top: 40px;  /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á */
    left: 50%;
    width: 40px;
    height: 40px;
    background: linear-gradient(to bottom, #87ceeb, #4682b4);
    border-radius: 50%;
    transform: translateX(-50%);
    z-index: 102;  /* ‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏µ‡∏Å‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πà‡∏≤‡∏á‡∏à‡∏£‡∏ß‡∏î */
    border: 3px solid #ffffff;
    box-shadow: 0px 0px 10px rgba(135, 206, 235, 0.5);
}

/* ‡πÑ‡∏ü‡∏•‡πà‡∏≤‡∏á‡∏à‡∏£‡∏ß‡∏î */
.rocket-fire {
    position: absolute;
    bottom: -60px;
    left: 50%;
    width: 30px;
    height: 70px;
    background: radial-gradient(circle, #ffa500, #ff4500 70%, transparent);
    transform: translateX(-50%);
    border-radius: 50%;
    animation: fire-flicker 0.2s infinite alternate;
    box-shadow: 0 0 20px rgba(255, 69, 0, 0.8);
}

/* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡πá‡∏Å‡∏ï‡πå‡πÑ‡∏ü‡∏û‡∏∏‡πà‡∏á */
@keyframes fire-flicker {
    0% {
        height: 70px;
        opacity: 0.8;
    }
    100% {
        height: 90px;
        opacity: 1;
    }
}

/* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡πá‡∏Å‡∏ï‡πå‡∏Å‡∏≤‡∏£‡∏û‡∏∏‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏ß‡∏î */
@keyframes rocket-launch {
    0% {
        bottom: -200px;
        transform: translateX(-50%) scale(1);
    }
    50% {
        transform: translateX(-50%) scale(1.1);
    }
    100% {
        bottom: 300px;
        transform: translateX(-50%) scale(1);
    }
}

/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏£‡∏ß‡∏î‡∏ñ‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á */
.rocket-score {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 40px;
    color: #ffcc00;
    font-weight: bold;
    opacity: 0;
    animation: show-score 3s ease-out forwards;
    z-index: 101;
}

/* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡πá‡∏Å‡∏ï‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô */
@keyframes show-score {
    0% {
        opacity: 0;
        transform: translateY(50px) translateX(-50%);
    }
    100% {
        opacity: 1;
        transform: translateY(0) translateX(-50%);
    }
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Popup ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° */
.waiting-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    color: white;
    font-family: 'Orbitron', sans-serif; /* ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÅ‡∏ö‡∏ö Sci-Fi */
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á Popup */
.waiting-popup .popup-content {
    background: rgba(20, 20, 50, 0.9);
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0px 0px 20px rgba(0, 153, 255, 0.8);
    animation: pulse 1.5s infinite alternate;
}

/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Popup */
.waiting-popup h2 {
    font-size: 28px;
    color: #00ccff;
    text-shadow: 0px 0px 10px rgba(0, 204, 255, 0.8);
}

/* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÅ‡∏™‡∏á‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö */
@keyframes pulse {
    0% {
        box-shadow: 0px 0px 10px rgba(0, 153, 255, 0.5);
    }
    100% {
        box-shadow: 0px 0px 25px rgba(0, 153, 255, 1);
    }
}

/*‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏ô‡∏±‡∏¢*/
.answers {  
    display: grid;
    grid-template-columns: repeat(2, minmax(150px, 1fr)); /* ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô */
    gap: 20px;
    justify-content: center;
    align-items: stretch; /* ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
    background: linear-gradient(135deg, #0d1b2a, #1b263b);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(173, 216, 230, 0.5);
    width: 80%;
    max-width: 700px; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
    margin: auto;
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.answers button {
    width: 100%;
    min-height: 140px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
    padding: 20px;
    background: #444;
    border: 3px solid #444;
    color: #fff;
    border-radius: 12px;
    font-size: 22px;
    text-align: center;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s;
    word-wrap: break-word;
    white-space: normal; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà */
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.answers button:hover {
    background: #ff7f50;
    border-color: #ff7f50;
    transform: scale(1.05);
}

#open-answer {
    width: 100%;
    height: 50px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
    padding: 2px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á */
    font-size: 18px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
    border: none;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    outline: none;
    text-align: center;
    transition: all 0.3s ease-in-out;
}

#open-answer::placeholder {
    color: rgba(255, 255, 255, 0.6);
    font-style: italic;
}

#open-answer:focus {
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 10px rgba(173, 216, 230, 0.8);
}

#submit-open-answer {
    display: block; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
    margin: 20px auto; /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á */
    width: 150px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
    height: 80px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
    font-size: 22px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
    font-weight: bold;
    color: #fff;
    background: linear-gradient(45deg, #6a11cb, #2575fc);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    box-shadow: 0 0 15px rgba(173, 216, 230, 0.8);
    text-align: center; /* ‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
}

#submit-open-answer:hover {
    background: linear-gradient(45deg, red, darkorange);
    box-shadow: 0 0 20px rgba(173, 216, 230, 1);
    transform: scale(1.1);
}

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Score Popup */
        #score-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 10000;
            box-shadow: 0px 0px 20px rgba(0, 153, 255, 0.8);
        }
        #score-popup h2 {
            margin-bottom: 10px;
            font-size: 50px;
            color: cyan;
        }
        #score-popup p {
            font-size: 30px;
            margin: 5px 0;
        }
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 999;
        }
        /* ‡πÅ‡∏ñ‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô */
#progress-container {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
    position: relative;
}

#progress-bar {
    width: 80%;
    height: 20px;
    background-color: #ddd;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    margin: 0 10px;
}

#progress {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #ff7f50, #ff4500);
    transition: width 0.5s ease-in-out;
}

#rocket {
    font-size: 30px;
    transition: transform 0.5s ease-in-out;
}

#flag {
    font-size: 30px;
}
.meteor {
    position: absolute;
    top: -10px;
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    animation: meteor-shower 5s linear infinite;
    background-color: #ffcc00;
}
    </style>
</head>
<body>  
    <!-- ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ -->
    <div id="menu">
        <a href="newplay.html"><i class="fa-solid fas fa-home fa-bounce" style="--fa-bounce-start-scale-x: 1; --fa-bounce-start-scale-y: 1; --fa-bounce-jump-scale-x: 1; --fa-bounce-jump-scale-y: 1; --fa-bounce-land-scale-x: 1; --fa-bounce-land-scale-y: 1; color: cyan;"></i> Play Game</a>
        <a href="newhistory.html"><i class="fas fa-history fa-beat" style="color: cyan;"></i> History</a>  
        <a href="newsetting.html"><i class="fas fa-cog fa-pulse" style="color: cyan;"></i> Setting</a>
        <a href="newevaluation.html"><i class="fa-solid fa-thumbs-up fa-flip" style="--fa-animation-duration: 3s; color: cyan;"></i> Evaluation</a>
        <a href="/play.html"><i class="fa-solid fa-globe fa-spin" style="color: cyan;"></i>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà 1</a>
        <a href="/index.html"><i class="fa-solid fas fa-sign-out-alt fa-shake" style="color: cyan;"></i> Log Out</a>
    </div>
    
<p><h1>Website for Evaluating Programming </h1></p>
<p><h1>and Algorithmic Expertise Using C++</h1></p>

<!-- ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
<div id="user-welcome" style="text-align: center; font-size: 20px;">
    <p>üôè Welcome, <span id="username-display"></span>! üôè</p>
</div>

<h1>üåû Enter Room Code ü™ê</h1>
<div id="room-code-section">
    <input type="text" id="room-code" placeholder="Enter Room Code" required>
    <button id="submit-room-code">Submit</button>
</div>

<div id="player-info">
    <input type="text" id="player-name" placeholder="Enter your name" required>
    <button id="start-quiz">Start Quiz</button>
</div>

<!-- Popup: Waiting for Game Start -->
<div id="waiting-popup" class="waiting-popup">
    <div class="popup-content">
        <p>Waiting for the game to start...</p>
        <p>Room Code: <span id="room-code-display"></span></p>
        <p>Player Name: <span id="player-name-display"></span></p>
    </div>
</div>

<!-- ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° -->
<div id="quiz-container" style="display: none;">
    <!-- Progress Bar -->
<div id="progress-container">
    üöÄ <span id="rocket">üöÄ</span>
    <div id="progress-bar">
        <div id="progress"></div>
    </div>
    <span id="flag">üèÅ</span>
</div>

    <h2 id="question"></h2>
    <div id="timer">Time left: <span id="time-left">0</span> seconds</div>
    
    <!-- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
    <div class="answers" id="options-container" style="display: none;">
        <button class="answer" id="option-0"></button>
        <button class="answer" id="option-1"></button>
        <button class="answer" id="option-2"></button>
        <button class="answer" id="option-3"></button>
    </div>

<!-- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢ -->
<div class="answers" id="open-answer-container" style="display: none;">
    <input type="text" id="open-answer" placeholder="Type your answer here" />
    <button id="submit-open-answer">Submit Answer</button> <!-- ‡∏õ‡∏∏‡πà‡∏° submit -->
</div>

</div>
<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° ans-popup -->
<div id="ans-popup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; color: white; text-align: center; font-size: 30px; font-weight: bold; justify-content: center; align-items: center; z-index: 999;"></div>

<div id="overlay"></div>
<!-- pop up ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡πâ‡∏π‡πÄ‡∏•‡πà‡∏ô -->
<div id="score-popup">
    <h2>Score Update</h2>
    <p>Correct Answer: <span id="correct-answer"></span></p>
    <p>Your Answer: <span id="player-answer"></span></p>
    <p>Current Score: <span id="current-score"></span></p>
</div>

<!-- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏∂‡πâ‡∏á -->
<div id="sad-face">
    <span>üò°</span>
</div>

<!-- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
<audio id="correct-sound" src="sounds/Yes.mp3" preload="auto"></audio>
<audio id="wrong-sound" src="sounds/No.mp3" preload="auto"></audio>
<audio id="yahoo-sound" src="sounds/yahoo.mp3" preload="auto"></audio>
<audio id="c-sound" src="sounds/c.mp3" preload="auto"></audio>
<audio id="o-sound" src="sounds/o.mp3" preload="auto"></audio>
<audio id="hoverSound" src="sounds/h.mp3" preload="auto"></audio>
<audio id="background-music" src="sounds/start.mp3" autoplay loop></audio>

<script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
    // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Socket.IO
const socket = io();

let quizzes = [];
let currentQuestionIndex = 0;
let timerInterval;
let timeLeft = 0;
let playerName = '';
let score = 0;
let roomCode = '';
let playerScore = 0;    

//‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô
let totalQuestions = 0; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î


    // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å sessionStorage ‡∏´‡∏£‡∏∑‡∏≠ localStorage ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    const username = sessionStorage.getItem('username'); // ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ localStorage.getItem('username');
    if (username) {
        document.getElementById('username-display').innerText = username;
    }

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á
document.getElementById('submit-room-code').addEventListener('click', async () => {
roomCode = document.getElementById('room-code').value;
document.getElementById('overlay').style.display = 'none';
if (roomCode) {
    try {
        const response = await fetch(`/roomcodes2/${roomCode}`);
        const roomData = await response.json();

        if (roomData && Array.isArray(roomData.selectedQuestions) && roomData.selectedQuestions.length > 0) {
            quizzes = roomData.selectedQuestions;
            totalQuestions = quizzes.length; // ‡∏î‡∏∂‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            updateProgressBar(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ñ‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            document.getElementById('room-code-section').style.display = 'none';
            document.getElementById('player-info').style.display = 'block';

        } else {
            alert('Invalid Room Code or no questions found.');
            console.warn('Room data:', roomData);
        }
    } catch (error) {
        console.error('Error fetching room data:', error);
    }
} else {
    alert('Please enter a valid Room Code.');
}
});

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° 'Start Quiz'
document.getElementById('start-quiz').addEventListener('click', () => {
    playerName = document.getElementById('player-name').value.trim(); // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
    roomCode = document.getElementById('room-code').value; // ‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á
    document.getElementById('overlay').style.display = 'none';
    if (playerName) {
        sessionStorage.setItem('name', playerName); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô sessionStorage
        socket.emit('join-room', roomCode, playerName); // ‡∏™‡πà‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå

        // ‡πÅ‡∏™‡∏î‡∏á Popup: ‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
        document.getElementById('waiting-popup').style.display = 'flex';
        document.getElementById('room-code-display').innerText = roomCode; // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á
        document.getElementById('player-name-display').innerText = playerName; // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
    } else {
        alert('Please enter your name');
    }
});

// ‡∏ü‡∏±‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß
socket.on('game-started', () => {
    // ‡∏ã‡πà‡∏≠‡∏ô Popup ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°
    document.getElementById('waiting-popup').style.display = 'none';

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
    document.getElementById('quiz-container').style.display = 'block';
    displayQuiz(currentQuestionIndex);

    document.getElementById('overlay').style.display = 'none';
});

// ‡∏ü‡∏±‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏Å‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß
socket.on('game-started', () => {
document.getElementById('quiz-container').style.display = 'block';
document.getElementById('overlay').style.display = 'none';
displayQuiz(currentQuestionIndex);
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
async function loadQuiz() {
try {
    const response = await fetch('/quiz2');
    quizzes = await response.json();
    displayQuiz(currentQuestionIndex);
} catch (error) {
    console.error('Error fetching quiz:', error);
}
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
function displayQuiz(index) {
    clearInterval(timerInterval); // ‡∏´‡∏¢‡∏∏‡∏î timer ‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
    console.log("displayQuiz called, resetting timer...");
    document.getElementById('overlay').style.display = 'none';
        if (!quizzes[index]) {
            console.error('No quiz data found at index:', index);
            alert('Quiz data is missing or invalid!');
            endQuiz();
            return;
        }

        const quizData = quizzes[index];
        const questionElement = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const openAnswerContainer = document.getElementById('open-answer-container');
        const timeLeftElement = document.getElementById('time-left');

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        questionElement.innerText = quizData.question;
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if (quizData.options && quizData.options.length > 0) {
            optionsContainer.style.display = 'block';
            openAnswerContainer.style.display = 'none';
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
            quizData.options.forEach((option, i) => {
                const optionButton = document.getElementById(`option-${i}`);
                optionButton.innerText = option;
                optionButton.onclick = () => checkAnswer(i, quizData.correct, quizData.level);
            });
        } else {
            optionsContainer.style.display = 'none';
            openAnswerContainer.style.display = 'block';
        }

        // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤
        timeLeft = quizData.timer;
        timeLeftElement.innerText = timeLeft;

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
        timerInterval = setInterval(() => {
            if (timeLeft > 0) {
                timeLeft--;
                timeLeftElement.innerText = timeLeft;
            } else {
                clearInterval(timerInterval);
                alert('‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î!');
                loadNextQuestion();
            }
        }, 1000);
            // üì¢ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
    sendPlayerProgress2();
    }

// ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ß‡∏•‡∏≤
function startTimer() {
clearInterval(timerInterval);
timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById('time-left').innerText = timeLeft;
    document.getElementById('overlay').style.display = 'none';
    if (timeLeft <= 0) {
        clearInterval(timerInterval);
        currentQuestionIndex++;
        if (currentQuestionIndex < quizzes.length) {
            displayQuiz(currentQuestionIndex);
        } else {
            endQuiz();
        }
    }
}, 1000);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏õ‡∏£‡∏ô‡∏±‡∏¢
function checkAnswer(selectedIndex, correctIndex, level) {
    console.log("checkAnswer called, stopping timer...");
    clearInterval(timerInterval); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤
    document.getElementById('overlay').style.display = 'none';
let correctAnswerText = quizzes[currentQuestionIndex].options[correctIndex]; // ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
let playerAnswerText = quizzes[currentQuestionIndex].options[selectedIndex]; // ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

showAnsPopup(selectedIndex, playerAnswerText);

if (selectedIndex === correctIndex) {
    let points = level === 1 ? 1 : level === 2 ? 3 : 5;
    score += points;
    alert(`‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß`);
} else {
    alert('‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
}
setTimeout(() => {
        sendPlayerProgress2();
        document.getElementById('ans-popup').style.display = 'none';
        showScorePopup(correctAnswerText, playerAnswerText, score);
    }, timeLeft * 1000);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢
function checkOpenAnswer(playerAnswer, correctAnswer, level) {
    console.log("checkAnswer called, stopping timer...");
    clearInterval(timerInterval); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤
    document.getElementById('overlay').style.display = 'none';
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ playerAnswer ‡πÅ‡∏•‡∏∞ correctAnswer ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ï‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ trim()
    if (playerAnswer && correctAnswer) {
    let sanitizedPlayerAnswer = String(playerAnswer).toLowerCase().trim();
    let sanitizedCorrectAnswer = String(correctAnswer).toLowerCase().trim();
    
    console.log("checkOpenAnswer() called");
    console.log("Player Answer:", sanitizedPlayerAnswer);
    console.log("Correct Answer:", sanitizedCorrectAnswer);
    showAnsPopup(playerAnswer);

    if (sanitizedPlayerAnswer === sanitizedCorrectAnswer) {
        let points = level === 1 ? 1 : level === 2 ? 3 : 5;
        score += points;
        alert(`‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß`);
    } else {
        alert('‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
    }
} else {
    alert('Invalid answer format');
}
    setTimeout(() => {
        sendPlayerProgress2();
        document.getElementById('ans-popup').style.display = 'none';
        showScorePopup(correctAnswer, playerAnswer, score);
    }, timeLeft * 1000);
}

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° submit ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢
document.getElementById('submit-open-answer').addEventListener('click', () => {
    const openAnswerInput = document.getElementById('open-answer');
    const playerAnswer = openAnswerInput.value;
    const correctAnswer = quizzes[currentQuestionIndex].correct;
    const level = quizzes[currentQuestionIndex].level; // ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°

    checkOpenAnswer(playerAnswer, correctAnswer, level);

    // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ input ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î submit
    openAnswerInput.value = '';

});

function loadNextQuestion() {
currentQuestionIndex++;
document.getElementById('overlay').style.display = 'none';
if (currentQuestionIndex < quizzes.length) {
    displayQuiz(currentQuestionIndex);
} else {
    endQuiz();
}
updateProgressBar(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ñ‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ üöÄ
}

//‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πâ‡∏π‡πÄ‡∏•‡πà‡∏ô
function sendPlayerProgress2() {
    socket.emit("player-progress2", {
        roomCode: roomCode,
        playerName: playerName,
        currentQuestion: currentQuestionIndex, 
        totalQuestions: quizzes.length,
        score: score
    });
}

async function savePlayerScore2(name, score, username, roomCode, datePlayed, uniqueIdentifier) {
try {
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ datePlayed ‡πÅ‡∏•‡∏∞ uniqueIdentifier ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
    // const datePlayed = new Date().toISOString(); // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ã‡πâ‡∏≥‡πÅ‡∏•‡πâ‡∏ß
    // const uniqueIdentifier = `${username}-${new Date().getTime()}`; // ‡πÉ‡∏ä‡πâ timestamp ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á
    // ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å input ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠ sessionStorage
    const playerName = sessionStorage.getItem('name') || name; // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å sessionStorage
    if (!playerName) {
        throw new Error('Player name is required'); // ‡πÅ‡∏à‡πâ‡∏á error ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠
    }
    console.log('Unique Identifier:', uniqueIdentifier);
    console.log({
name, 
score, 
username, 
roomCode, 
datePlayed, 
uniqueIdentifier 
});


    const response = await fetch('/save-score2', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ 
            name, 
            score, 
            username, 
            roomCode, 
            datePlayed, // ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô endQuiz
            uniqueIdentifier 
        })
    });
    
    if (response.ok) {
        console.log('Score saved successfully');
    } else {
        console.error('Error saving score');
    }
} catch (error) {
    console.error('Error:', error);
}
}

function resetQuiz() {
currentQuestionIndex = 0;
score = 0;
document.getElementById('player-info').style.display = 'block';
document.getElementById('username-display').style.display = 'block';
document.getElementById('quiz-container').style.display = 'none';
document.getElementById('overlay').style.display = 'none';
}

function showSadFace() {
const sadFace = document.getElementById('sad-face');
sadFace.style.display = 'flex';
setTimeout(() => {
    sadFace.style.display = 'none';
}, 2000); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}

function showAnsPopup(selectedIndex, playerAnswer) {
    const ansPopup = document.getElementById('ans-popup');
    const openAnswerInput = document.getElementById('open-answer');
    playerAnswer = openAnswerInput.value; 
    ansPopup.style.display = 'flex';

    if (selectedIndex === 0) {
        ansPopup.style.backgroundColor = 'red';
        ansPopup.innerText = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1';
    } else if (selectedIndex === 1) {
        ansPopup.style.backgroundColor = 'orange';
        ansPopup.innerText = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 2';
    } else if (selectedIndex === 2) {
        ansPopup.style.backgroundColor = 'yellow';
        ansPopup.innerText = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 3';
    } else if (selectedIndex === 3) {
        ansPopup.style.backgroundColor = 'green';
        ansPopup.innerText = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 4';
    } else {
        ansPopup.style.backgroundColor = 'purple';
        ansPopup.innerText = `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö‡πÑ‡∏õ‡∏ß‡πà‡∏≤ \"${playerAnswer}\"`;
    }
}

function showScorePopup(correct, player, score) {
    console.log("checkAnswer called, stopping timer...");
    clearInterval(timerInterval); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤
    document.getElementById('overlay').style.display = 'block';

    document.getElementById('correct-answer').innerText = correct;
    document.getElementById('player-answer').innerText = player;
    document.getElementById('current-score').innerText = score;

    const popup = document.getElementById('score-popup');
    popup.style.display = 'block';

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    const correctAnswerStr = String(correct).trim().toLowerCase();
    const playerAnswerStr = String(player).trim().toLowerCase();

    // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
    const oldResultText = popup.querySelector(".result-text");
        if (oldResultText) {
            oldResultText.remove();
        }

    let resultText = document.createElement("p");
    resultText.classList.add("result-text"); // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≤‡∏™‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    resultText.style.fontSize = "30px"; // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    resultText.style.fontWeight = "bold";

    if (playerAnswerStr === correctAnswerStr) {
        resultText.innerText = "‚úÖ ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å! ‚úÖ ";
        resultText.style.color = "limegreen"; // ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å
        launchConfetti(); // ‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏•‡∏∏‡∏ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å
        playSound(correctSound);
    } else {
        resultText.innerText = "‚ùå ‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î! ‚ùå";
        resultText.style.color = "red"; // ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î
        showSadFace(); // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏∂‡πâ‡∏á‡∏ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î
        playSound(wrongSound);
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î" ‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô popup
    popup.appendChild(resultText);

    setTimeout(() => {
        popup.style.display = 'none';
        loadNextQuestion();
    }, 10000); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
}


function launchConfetti() {
// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ canvas-confetti ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏•‡∏∏‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°
confetti({
    particleCount: 100, // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ
    spread: 70,         // ‡∏°‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢
    origin: { x: 0.5, y: 0.5 }, // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠
    colors: ['#ff0', '#0f0', '#00f', '#f0f', '#f90'], // ‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏∏
});

// ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏û‡∏•‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ü‡∏∏‡πâ‡∏á‡∏ü‡∏π‡πà
setTimeout(() => {
    confetti({
        particleCount: 150,
        spread: 100,
        origin: { x: Math.random(), y: Math.random() * 0.5 },
        colors: ['#ff0000', '#00ff00', '#0000ff'],
    });
}, 300);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏∂‡πâ‡∏á
function showSadFace() {
const sadFace = document.createElement('div');
sadFace.innerHTML = 'üòû';
sadFace.style.position = 'fixed';
sadFace.style.top = '50%';
sadFace.style.left = '50%';
sadFace.style.transform = 'translate(-50%, -50%)';
sadFace.style.fontSize = '100px';
sadFace.style.zIndex = '10000';
sadFace.style.color = 'red';
document.body.appendChild(sadFace);

setTimeout(() => {
    sadFace.remove();
}, 2000); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏•‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° OK
function showFinalCelebration() {
    const music = document.getElementById("background-music");
    music.pause(); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    music.src = "sounds/end.mp3"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏ö‡πÄ‡∏Å‡∏°
    music.play().catch(err => console.warn("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô end.mp3:", err));

    playSound(yahooSound);
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á interval ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏∏‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
    const confettiInterval = setInterval(launchConfetti, 500);

    const fireworks = document.createElement('div');
    fireworks.innerHTML = `
        <h2 style="color: orangered; font-size: 50px; text-shadow: 3px 3px 6px cyan; margin-bottom: 20px;">
            <p>üí£ Game Over ü§Ø</p> 
            <p>ü§© Congratulations!</p>
            <p>You can see your score now ü§©!</p>
        </h2>
    `;
    fireworks.style.position = 'fixed';
    fireworks.style.top = '50%';
    fireworks.style.left = '50%';
    fireworks.style.transform = 'translate(-50%, -50%)';
    fireworks.style.textAlign = 'center';
    fireworks.style.zIndex = '10000';
    fireworks.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
    fireworks.style.padding = '20px';
    fireworks.style.borderRadius = '10px';

    const okButton = document.createElement('button');
    okButton.innerText = 'OK';
    okButton.style.marginTop = '10px';
    okButton.style.padding = '10px 20px';
    okButton.style.fontSize = '18px';
    okButton.style.border = 'none';
    okButton.style.borderRadius = '5px';
    okButton.style.backgroundColor = 'cyan';
    okButton.style.color = 'black';
    okButton.style.cursor = 'pointer';
    okButton.onclick = () => {
        clearInterval(confettiInterval); // ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏•‡∏∏
        fireworks.remove();
    };

    fireworks.appendChild(okButton);
    document.body.appendChild(fireworks);
}


// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏£‡∏ß‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
function showRocketAndScore(score) {
    const body = document.querySelector('body');
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏£‡∏ß‡∏î
    const rocket = document.createElement('div');
    rocket.classList.add('rocket');
    body.appendChild(rocket);

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πà‡∏≤‡∏á‡∏à‡∏£‡∏ß‡∏î
    const fire = document.createElement('div');
    fire.classList.add('rocket-fire');
    rocket.appendChild(fire);

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏µ‡∏Å‡∏Ç‡πâ‡∏≤‡∏á
    const leftWing = document.createElement('div');
    leftWing.classList.add('rocket-wing', 'left');
    rocket.appendChild(leftWing);

    const rightWing = document.createElement('div');
    rightWing.classList.add('rocket-wing', 'right');
    rocket.appendChild(rightWing);

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏ß‡∏î
    const window = document.createElement('div');
    window.classList.add('rocket-window');
    rocket.appendChild(window);

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
    const scoreText = document.createElement('div');
    scoreText.classList.add('rocket-score');
    scoreText.textContent = `Your Score: ${score}`;
    body.appendChild(scoreText);
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° Back
    const backButton = document.createElement('button');
    backButton.innerText = 'Back';
    backButton.style.position = 'absolute';
    backButton.style.bottom = '20px';  // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏à‡∏£‡∏ß‡∏î
    backButton.style.left = '50%';
    backButton.style.transform = 'translateX(-50%)';
    backButton.style.padding = '10px 20px';
    backButton.style.backgroundColor = '#ff6347';
    backButton.style.color = '#fff';
    backButton.style.border = 'none';
    backButton.style.borderRadius = '5px';
    backButton.style.fontSize = '16px';
    backButton.style.cursor = 'pointer';
    backButton.style.transition = 'background-color 0.3s ease';
    
    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "Back" ‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ play
    backButton.onclick = () => {
        history.back();
    };

    body.appendChild(backButton);
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏£‡∏ß‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à
    setTimeout(() => {
        scoreText.style.opacity = 1;
    }, 3000); // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏£‡∏ß‡∏î‡∏û‡∏∏‡πà‡∏á‡πÑ‡∏õ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡πÄ‡∏Å‡∏°
function endQuiz() {
const playerName = sessionStorage.getItem('name')
const username = sessionStorage.getItem('username');
const datePlayed = new Date().toISOString(); // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á datePlayed
const uniqueIdentifier = `${username}-${new Date().getTime()}`; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á uniqueIdentifier

savePlayerScore2(playerName, score, username, roomCode, datePlayed, uniqueIdentifier);
showFinalCelebration(); // ‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏•‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å
showRocketAndScore(score);
socket.emit('player-score2', {
            name: playerName,
            roomCode: roomCode,
            score: score
        });
        alert(`Game Over! Your Score: ${score}`);
resetQuiz();
}

//‡πÅ‡∏ñ‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Å‡∏°
function updateProgressBar() {
    let progressPercentage = (currentQuestionIndex / totalQuestions) * 100;
    document.getElementById('progress').style.width = `${progressPercentage}%`;

    // ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà üöÄ ‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤
    document.getElementById('rocket').style.transform = `translateX(${progressPercentage}%)`;
}

// ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏∏‡πà‡∏°
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πå
    function playSound(sound) {
        sound.pause();        // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
        sound.currentTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        sound.play();         // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    }
    
    document.querySelectorAll("#menu a").forEach(item => {
    item.addEventListener("mouseenter", () => {
        const hoverSound = document.getElementById("hoverSound");
        if (hoverSound) {
            hoverSound.pause();  // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            hoverSound.currentTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            hoverSound.play().catch(err => console.warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á hover:", err));
        }
    });
});

const correctSound = document.getElementById("correct-sound");
const wrongSound = document.getElementById("wrong-sound");
const yahooSound = document.getElementById("yahoo-sound");
const cSound = document.getElementById("c-sound");
const oSound = document.getElementById("o-sound");

//‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
document.getElementById("submit-room-code").addEventListener("click", () => playSound(oSound));
document.getElementById("start-quiz").addEventListener("click", () => playSound(oSound));

//‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÉ‡∏ô‡πÄ‡∏Å‡∏°
document.getElementById("option-0").addEventListener("click", () => playSound(cSound));
document.getElementById("option-1").addEventListener("click", () => playSound(cSound));
document.getElementById("option-2").addEventListener("click", () => playSound(cSound));
document.getElementById("option-3").addEventListener("click", () => playSound(cSound));
document.getElementById("submit-open-answer").addEventListener("click", () => playSound(cSound));
document.addEventListener("DOMContentLoaded", function() {
    const music = document.getElementById("background-music");
    
    // ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    music.play().catch(error => {
        console.warn("Autoplay ‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...");
    });

    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ quiz-container ‡∏õ‡∏£‡∏≤‡∏Å‡∏è
    const quizContainer = document.getElementById("quiz-container");
    const observer = new MutationObserver(() => {
        if (quizContainer.style.display !== "none") {
            music.src = "sounds/startgame.mp3";
            music.play();
        }
    });

    observer.observe(quizContainer, { attributes: true, attributeFilter: ["style"] });
});

        //‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        document.addEventListener("DOMContentLoaded", function() {
        const soundSetting = localStorage.getItem('soundSetting');

        if (soundSetting === 'off') {
            document.querySelectorAll('audio').forEach(audio => {
                audio.muted = true;
            });
        }
    });

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡πÉ‡∏´‡∏°‡πà
function createMeteor() {
    const meteor = document.createElement('div');
    meteor.classList.add('meteor');
    document.body.appendChild(meteor);
    
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß
    meteor.style.left = `${Math.random() * 100}vw`;
    meteor.style.animationDuration = `${Math.random() * 5 + 5}s`;  // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏ä‡πâ‡∏≤‡πÜ

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
    meteor.style.width = `${Math.random() * 3 + 4}px`;
    meteor.style.height = `${Math.random() * 3 + 4}px`;
    meteor.style.opacity = Math.random() * 0.5 + 0.5;

    // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à
    setTimeout(() => {
        meteor.remove();
    }, (Math.random() * 5 + 5) * 1000);  // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á animation
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡∏ó‡∏∏‡∏Å‡πÜ 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
setInterval(createMeteor, 500);

</script>

</body>
</html> 
