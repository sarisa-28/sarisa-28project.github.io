<!--public/addquestion.html-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalcpp Quiz</title>
    <link rel="stylesheet" href="style.css">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏á‡∏Ñ‡πå Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
h1 {
    color: orangered;
    font-size: 50px;
    text-shadow: 3px 3px 6px cyan;
    margin-bottom: 20px;
}

/* ‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö select */
.question-select {
    background: rgba(0, 0, 0, 0.6); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
    border-radius: 10px;
    padding: 15px;
    margin: 20px 0;
    box-shadow: 0 4px 10px cyan; /* ‡πÄ‡∏á‡∏≤ */
    max-width: 400px;
    margin: 20px auto;
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö select */
.question-select select {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    background-color: #1e1e1e;
    color: #fff;
    border: 2px solid #444;
    font-size: 16px;
    transition: all 0.3s ease;
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÇ‡∏ü‡∏Å‡∏±‡∏™ */
.question-select select:focus {
    border-color: #ff7f50;
    outline: none;
    box-shadow: 0 0 10px #ff7f50;
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
.question-select label {
    font-size: 18px;
    color: #fff;
    margin-bottom: 8px;
    display: block;
    text-align: left;
}

/* ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡πÑ‡∏ü‡∏•‡πå */
h2 {
            color: #00c3ff;
            text-shadow: 0 0 10px cyan;
            margin-bottom: 20px;
        }

        #file-input {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid #00c3ff;
            border-radius: 8px;
            padding: 10px;
            color: white;
            cursor: pointer;
        }

        button {
            background: #00c3ff;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            color: black;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 0 10px cyan;
            transition: 0.3s;
        }

        button:hover {
            background: red;
            box-shadow: 0 0 15px cyan;
        }

    </style>
</head>
<body>
        <!-- ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ -->
        <div id="menu">
            <a href="start.html"><i class="fa-solid fas fa-play fa-bounce" style="--fa-bounce-start-scale-x: 1; --fa-bounce-start-scale-y: 1; --fa-bounce-jump-scale-x: 1; --fa-bounce-jump-scale-y: 1; --fa-bounce-land-scale-x: 1; --fa-bounce-land-scale-y: 1; color: cyan;"></i> Start</a>
            <a href="addquestion.html">ü§îAdd Questionsüí≠</a>
            <a href="roomcode.html"><i class="fas fa-key fa-solid fa-flip"  style="--fa-animation-duration: 3s; color: cyan;"></i> Set Room Code</a>  
            <a href="seeroom.html">üö©View Room CodesüëÄ</a> 
            <a href="scores.html"><i class="fas fa-trophy fa-beat" style="color: cyan;"></i> View Scores</a>
            <a href="historyroomcode.html">üëëHistory RoomCodeüè∞</a>
            <a href="setting.html"><i class="fas fa-cog fa-pulse" style="color: cyan;"></i> Setting</a>
            <a href="evaluation.html">üôáüèª Evaluation üôáüèª‚Äç‚ôÄÔ∏è</a>
            <a href="new/newstart.html"><i class="fa-solid fa-globe fa-spin" style="color: cyan;"></i> ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà 2</a>
            <a href="index.html"><i class="fa-solid fas fa-sign-out-alt fa-shake" style="color: cyan;"></i> Log Out</a>
        </div>
        
        <h1>üë©üèº‚Äçüíª Add Question üë®üèº‚Äçüíª</h1>

        <!-- ‡πÉ‡∏™‡πà‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏≠‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° -->
         <h2>‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå .json ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h2>
        <input type="file" id="file-input" accept=".json">
        <button onclick="uploadFile()" id="uploadFile">Upload Questions</button>

        <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° -->
        <div class="question-select">
            <label for="question-type">Select Question Type:</label>
            <select id="question-type" required>
                <option value="" disabled selected>Select Type</option>
                <option value="multiple-choice">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏ô‡∏±‡∏¢(multiple-choice)</option>
                <option value="essay">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢(essay)</option>
            </select>
        </div>        
    
    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏ô‡∏±‡∏¢ -->
    <form id="add-question-form" class="question-form" style="display: none;">
        <label for="new-question">Question</label>
        <textarea id="new-question" rows="4" placeholder="Enter your question here..." required></textarea>
        
        <label for="option1">Option 1</label>
        <input type="text" id="option1" placeholder="Option 1" required>
        
        <label for="option2">Option 2</label>
        <input type="text" id="option2" placeholder="Option 2" required>
        
        <label for="option3">Option 3</label>
        <input type="text" id="option3" placeholder="Option 3" required>
        
        <label for="option4">Option 4</label>
        <input type="text" id="option4" placeholder="Option 4" required>
        
        <label for="correct-answer">Correct Option Index</label>
        <input type="number" id="correct-answer" placeholder="Correct Option Index" required>
        
        <label for="question-timer">Time in seconds</label>
        <input type="number" id="question-timer" placeholder="Time in seconds" required>
        
        <label for="question-level">Level</label>
        <select id="question-level" required>
            <option value="" disabled selected>Select Level</option>
            <option value="1">Level 1</option>
            <option value="2">Level 2</option>
            <option value="3">Level 3</option>
        </select>
        
        <button type="submit" id="submit">Add Question</button>
    </form>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢ -->
    <form id="add-question-form2" class="question-form" style="display: none;">
        <label for="new-question2">Question</label>
        <textarea id="new-question2" placeholder="Enter your question here..." required></textarea>
        
        <label for="correct-answer2">Correct Answer</label>
        <input type="text" id="correct-answer2" placeholder="Correct Answer" required>
        
        <label for="question-timer2">Time in seconds</label>
        <input type="number" id="question-timer2" placeholder="Time in seconds" required>
        
        <label for="question2-level">Level</label>
        <select id="question2-level" required>
            <option value="" disabled selected>Select Level</option>
            <option value="1">Level 1</option>
            <option value="2">Level 2</option>
            <option value="3">Level 3</option>
        </select>
        
        <button type="submit" id="submit2">Add Question</button>
    </form>
    
    <a href="start.html" style="color:cyan;">Back To Home</a>
    
    <audio id="o-sound" src="sounds/o.mp3" preload="auto"></audio>
    <audio id="hoverSound" src="sounds/h.mp3" preload="auto"></audio>
    <iframe src="music.html" style="display: none;"></iframe>

    <script>
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏ô‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢
        document.getElementById('question-type').addEventListener('change', (event) => {
            const questionType = event.target.value;
            const form1 = document.getElementById('add-question-form');
            const form2 = document.getElementById('add-question-form2');
            
            if (questionType === 'multiple-choice') {
                form1.style.display = 'block';
                form2.style.display = 'none';
            } else if (questionType === 'essay') {
                form1.style.display = 'none';
                form2.style.display = 'block';
            }
        });
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏ô‡∏±‡∏¢
        document.getElementById('add-question-form').addEventListener('submit', async function(event) {
            event.preventDefault();

            const newQuestion = document.getElementById('new-question').value;
            const option1 = document.getElementById('option1').value;
            const option2 = document.getElementById('option2').value;
            const option3 = document.getElementById('option3').value;
            const option4 = document.getElementById('option4').value;
            const correctAnswer = parseInt(document.getElementById('correct-answer').value) - 1;
            const questionTimer = parseInt(document.getElementById('question-timer').value);
            const level = parseInt(document.getElementById('question-level').value);

            const quizData = {
                type: "multiple-choice", // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
                question: newQuestion,
                options: [option1, option2, option3, option4],
                correct: correctAnswer,
                timer: questionTimer,
                level: level
            };

            try {
                const response = await fetch('/add-quiz', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(quizData)
                });

                if (response.ok) {
                    alert('Question added successfully!');
                    document.getElementById('add-question-form').reset();
                } else {
                    alert('Error adding question');
                }
            } catch (error) {
                console.error('Error:', error);
            }
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡∏ô‡∏±‡∏¢
        document.getElementById('add-question-form2').addEventListener('submit', async function(event) {
            event.preventDefault();

            const newQuestion = document.getElementById('new-question2').value;
            const correctAnswer = document.getElementById('correct-answer2').value;
            const questionTimer = parseInt(document.getElementById('question-timer2').value);
            const level = parseInt(document.getElementById('question2-level').value);

            const quizData = {
                type: "essay", // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
                question: newQuestion,
                correct: correctAnswer,
                timer: questionTimer,
                level: level
            };

            try {
                const response = await fetch('/add-quiz', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(quizData)
                });

                if (response.ok) {
                    alert('Question added successfully!');
                    document.getElementById('add-question-form2').reset();
                } else {
                    alert('Error adding question');
                }
            } catch (error) {
                console.error('Error:', error);
            }
        });

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
window.onload = () => {
    const quizContainer = document.getElementById('quiz-container');
    if (quizContainer) {
        quizContainer.style.display = 'none';
    }
};

//‡πÅ‡∏≠‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå
async function uploadFile() {
        const fileInput = document.getElementById('file-input');
        if (fileInput.files.length === 0) {
            alert('Please select a file');
            return;
        }

        const formData = new FormData();
        formData.append('file', fileInput.files[0]);

        try {
            const response = await fetch('/upload-questions', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                alert('Questions uploaded successfully!');
            } else {
                alert('Error uploading questions');
            }
        } catch (error) {
            console.error('Upload error:', error);
        }
    }

// ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏∏‡πà‡∏°
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πå
    function playSound(sound) {
        sound.pause();        // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
        sound.currentTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        sound.play();         // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    }

    document.querySelectorAll("#menu a").forEach(item => {
    item.addEventListener("mouseenter", () => {
        const hoverSound = document.getElementById("hoverSound");
        if (hoverSound) {
            hoverSound.pause();  // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            hoverSound.currentTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            hoverSound.play().catch(err => console.warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á hover:", err));
        }
    });
});

    const oSound = document.getElementById("o-sound");

    document.getElementById("submit").addEventListener("click", () => playSound(oSound));
    document.getElementById("submit2").addEventListener("click", () => playSound(oSound));
    document.getElementById("uploadFile").addEventListener("click", () => playSound(oSound));

    //‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á
document.addEventListener("DOMContentLoaded", function() {
        const soundSetting = localStorage.getItem('soundSetting');

        if (soundSetting === 'off') {
            document.querySelectorAll('audio').forEach(audio => {
                audio.muted = true;
            });
        }
    });

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡πÉ‡∏´‡∏°‡πà
function createMeteor() {
    const meteor = document.createElement('div');
    meteor.classList.add('meteor');
    document.body.appendChild(meteor);
    
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß
    meteor.style.left = `${Math.random() * 100}vw`;
    meteor.style.animationDuration = `${Math.random() * 5 + 5}s`;  // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏ä‡πâ‡∏≤‡πÜ

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
    meteor.style.width = `${Math.random() * 3 + 4}px`;
    meteor.style.height = `${Math.random() * 3 + 4}px`;
    meteor.style.opacity = Math.random() * 0.5 + 0.5;

    // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à
    setTimeout(() => {
        meteor.remove();
    }, (Math.random() * 5 + 5) * 1000);  // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á animation
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡∏ó‡∏∏‡∏Å‡πÜ 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
setInterval(createMeteor, 500);

    </script>
</body>
</html>